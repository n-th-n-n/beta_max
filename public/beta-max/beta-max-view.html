<html>
<head>

<!-- This media thing does everything except for the actual frame panning -->
  <!-- https://github.com/johndyer/mediaelement/blob/master/docs/api.md -->
<script src="https://player.vimeo.com/api/player.js"></script>
<script src="https://code.jquery.com/jquery-1.12.4.js"></script>

<script src="https://fb.me/react-15.0.2.min.js"></script>
<script src="https://fb.me/react-dom-15.0.0-rc.1.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.23/browser.min.js"></script>
<script type="text/babel" src="./beta-max-view.js"></script>
</head>
<body>

<style>

html,body{
  margin:0;
  padding: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
}
.native-vid{
  position: fixed;
  top: 50%;
  left: 50%;
  min-width: 100%;
  min-height: 100%;
  width: auto;
  height: auto;
  z-index: -100;
  transform: translateX(-50%) translateY(-50%);
}
.control-bar{
    margin-top: 50px;
    display: block;
    width:600px;
    height: 30px;
    background: #ccc;
}


video, audio{
  display: none;
}

.testing{
  width:100%;
  height: 100%;
  display: none;
}
</style>

<!-- <div class="control-bar"></div> -->


<div id="beta-max-view"></div>

<!--
<div id="made-in-ny"></div>
<div id="player"></div> -->

<!-- <script>



console.log(connection)


// 2. This code loads the IFrame Player API code asynchronously.
var tag = document.createElement('script');

tag.src = "https://www.youtube.com/iframe_api";
var firstScriptTag = document.getElementsByTagName('script')[0];
firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

// 3. This function creates an <iframe> (and YouTube player)
//    after the API code downloads.
var playerYT;
function onYouTubeIframeAPIReady() {
 playerYT = new YT.Player('player', {
   height: '390',
   width: '640',
   videoId: 'M7lc1UVf-VE',
   events: {
     'onReady': onPlayerReady,
     'onStateChange': onPlayerStateChange
   }
 });
}

// 4. The API will call this function when the video player is ready.
function onPlayerReady(event) {
 event.target.playVideo();
}

// 5. The API calls this function when the player's state changes.
//    The function indicates that when playing a video (state=1),
//    the player should play for six seconds and then stop.
var done = false;
function onPlayerStateChange(event) {
 if (event.data == YT.PlayerState.PLAYING && !done) {
   setTimeout(stopVideo, 6000);
   done = true;
 }
}
function stopVideo() {
 playerYT.stopVideo();
}


var options = {
    // id: 59777392,
    id: 203710832,
    width: 640,
    loop: true
};

var player = new Vimeo.Player('made-in-ny', options);

player.on('progress', function(d){
  console.log('you can write an algorithm to just push it ahead, one complete load ', d)
})
player.loadVideo(76979871).then(function(id) {
  player.setVolume(0);
  player.play();
  player.on('play', function() {
      console.log('played the video!');
  });
}).catch(function(error) {
    switch (error.name) {
        case 'TypeError':
            // the id was not a number
            break;

        case 'PasswordError':
            // the video is password-protected and the viewer needs to enter the
            // password first
            break;

        case 'PrivacyError':
            // the video is password-protected or private
            break;

        default:
            // some other error occurred
            break;
    }
});



player.getDuration().then(function(duration) {

  var interval;
  //this should really only happen when the only thing gets buffers
  document.querySelectorAll('.control-bar')[0].addEventListener('click', function(e){
    document.querySelectorAll('.control-bar')[0].addEventListener('mousemove', function(e){

      clearTimeout(interval)

      interval = setInterval(function () {
        console.log('hiii')
        nativeVid.pause();
        nativeVid.currentTime  = 78*(e.clientX/window.innerWidth)
        nativeVid.play();
        // player.setCurrentTime(duration*(e.clientX/window.innerWidth))
        // playerYT.seekTo(duration*(e.clientX/window.innerWidth))
      }, 10);
      // console.log(this, e, e.clientX/window.innerWidth, duration )

    });
  });
  //this side of its busted
  // document.querySelectorAll('.control-bar')[0].addEventListener('mouseout', function(e){
  //   document.querySelectorAll('.control-bar')[0].addEventListener('removeEventListener', function(){})
  // });
}).catch(function(error) {
    // an error occurred
});
//
// player.getDuration().then(function(duration) {

// }).catch(function(error) {
//     // an error occurred
// });
-->
</script>
</body>
</html>
